+++
title = "Використання приватного поштового сервера на базі Mailcow"
date = "2022-07-22"
tags = [
    "Linux",
    "Server",
    "Mailcow",
    "Docker",
    "SMTP",
    "IMAP",
]
categories = [
    "Linux",
    "Selfhosted",
]
image = "header.jpg"
+++

## Вступ

Електронна пошта, або email - це технологія, що дозволяє користувачам обмінюватися інформацією за допомогою листів. Принцип та протоколи побудовано за аналогією роботи звичайної паперової пошти. 

Для роботи електронної пошти потрібен поштовий сервер з виділенним доменом (наприклад example.com), та кожному з користувачів виділяється адреса поштової скриньки (наприклад user@example.com). 

Наразі існує багато поштових провайдерів, що дозволяють створити адресу поштової скриньки безкоштовно, наприклад gmail, outlook, yahoo, та інші. Доступ до скриньки можливий як через веб-інтерфейс, так і через поштові протоколи SMTP, IMAP, POP3. Кожен з провайдерів має ліміт на максимально можливий об'єм для зберігання листів та файлів-вкладень.  

## Причини використання власного сервера

Можна навести випадки, коли використовувння поштової скриньки, зареєстровану на сервері публічного поштового провайдеру не підходить через деякі причини. Використання влашного поштового сервера для листування має як свої переваги так і недоліки.

### Переваги

**1. Використання своєї адреси.**

Через дуже велику кількість уже зареєстрованих користувачів на серверах публічних поштових провайдерів, дуже велика імовірність того, що бажаний формат адреси поштової скриньки вже зареєстрований. І тому для реєстрації користувачам доводиться додавати деякі слова, цифри, та навіть спецсимволи, щоб знайти вільну адресу.

Власний поштовий сервер дозволяє використовувати бажаний формат адреси, що може мати вигляд `user1@domain.com`, `user2@domain.com`, тощо. Також поштовий сервер може обслуговувати декілька доменів, наприклад `domain.com`, `brand.ua`.

Такий підхід дуже часто використовують для корпоративної пошти, де для кожного працівника створюється скринька на домені компанії. Такі адреси краще запам'ятовуються, що спонукає користувачів до комунікації.

**2. Незалежність від правил поштового провайдера.**

Кожний серівс має свої правила та обмеження, що можуть не задовільняти потреби користувача. Можна навести деякі приклади, це можуть бути:

- обмеження на об'єм, що виділяється для зберігання пошти;
- заборона на використання протоколів POP3, IMAP, SMTP;
- нав'язлива реклама, що додається у підписи до відправлених листів;
- політика блокування аккаунтів.

Маючи свій поштовий сервер, ви не обтяжені правилами з використання, а об'єм обмежено лише можливостями сервера.

**3. Приватність та конфіденційність даних.**

При користуванні сервісом, всі поштові листи та вкладення зберігаються на серверах провайдера. Немає жодних гарантій, що ваші персональні дані, та листування не передаються третім особам, або не аналізуються алгоритмами machine learning для перевірки вмісту на виявлення певної інформації. 

Деякі провайдери дозволяють користувачу видалити аккаунт, але це не означає фактичне видалення інформації про користувача та його листів. 

Маючи свій поштовий сервер можливо гнучко управляти своїми даними та листами, де кожна маніпуляція з даними є прозорою, та фактично виконується. У разі якщо для хостингу поштового сервера арендується VPS/VDS, то єдиним звеном що має доступ до ваших даних є провайдер хмарного хостингу.

### Недоліки

**1. Це не безкоштовно.**

На відміну від скриньки що можна отримати у поштового провайдера безкоштовно, для хостингу власного поштовогу сервісу необхідно орендувати або мати свій VPS/VDS сервер та домен. 

**2. Безпека, обслуговування та адміністрування.**

Будь яка інформаційна система потребує обслуговання. Популярні поштові провайдери мають відділи кваліфікованих спеціалістів для адміністрування та цілодобового моніторингу роботоздатності систем. 

У випадку використання власного сервера, вся робота з обслуговування й відповідальність за безпеку системи та її безперебійну роботу повністю лягає на користувача. Для цього необхідно володіти деякими технічними навичками, та розуміти схематику роботу системи хоча б на мінімальному рівні. 

**3. Спам.**

Сервери що викорустовуються для обміну електронною поштою дуже часто стають жертвами хакерів, використовуються 
для розсилки спаму, або небажаної пошти. У разі якщо сервер буде дуже часто відсилати спам, то IP-адресу серверу буде занесено у числені спам-бази. 

У такому випадку, навіть листи що не підпадають під категорію спаму, при відправці з цього сервера будуть потрапляти у спам фільтри, або навіть не доходити до кінцевого адресата. 

## Вимоги до сервера

Для того щоб сервер підходив для використання в якості поштового сервера, він повинен відповідати деяким критеріям:

- Мати виділену, білу IP-адресу;
- Мати відкриті порти для роботи поштових протоколів: 25, 110, 143, 465, 587, 993, 995;
- Мати відкриті порти для доступу через веб-інтерфейс: 80 або 443;
- Мати достатній обсяг оперативної пам'яті: для персональної скриньки достатньо 1 Гб, але чим більше користувачів, тим більше пам'яті потрібно.

## Вибір програмного забезпечення

Для розгортання власного сервера існують стеки ПЗ на базі компонентів з відкритим вихідним кодом. Звичайно можна зібрати свою конфігурацію із цих компонентів, але це вимагає більш поглибленного вивчення кожного з них, та більше часу на відладку й тестування. 


