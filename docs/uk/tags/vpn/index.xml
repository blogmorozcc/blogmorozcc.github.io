<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>VPN on Блог про IT</title>
        <link>https://blog.moroz.cc/uk/tags/vpn/</link>
        <description>Recent content in VPN on Блог про IT</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>uk</language>
        <lastBuildDate>Fri, 07 Jun 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.moroz.cc/uk/tags/vpn/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Запуск HTTPS і OpenVPN на одному порту 443 за допомогою балансувальника навантаження HAProxy</title>
        <link>https://blog.moroz.cc/uk/post/%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA-https-%D1%96-openvpn-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC%D1%83-%D0%BF%D0%BE%D1%80%D1%82%D1%83-443-%D0%B7%D0%B0-%D0%B4%D0%BE%D0%BF%D0%BE%D0%BC%D0%BE%D0%B3%D0%BE%D1%8E-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D1%83%D0%B2%D0%B0%D0%BB%D1%8C%D0%BD%D0%B8%D0%BA%D0%B0-%D0%BD%D0%B0%D0%B2%D0%B0%D0%BD%D1%82%D0%B0%D0%B6%D0%B5%D0%BD%D0%BD%D1%8F-haproxy/</link>
        <pubDate>Fri, 07 Jun 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.moroz.cc/uk/post/%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA-https-%D1%96-openvpn-%D0%BD%D0%B0-%D0%BE%D0%B4%D0%BD%D0%BE%D0%BC%D1%83-%D0%BF%D0%BE%D1%80%D1%82%D1%83-443-%D0%B7%D0%B0-%D0%B4%D0%BE%D0%BF%D0%BE%D0%BC%D0%BE%D0%B3%D0%BE%D1%8E-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D1%83%D0%B2%D0%B0%D0%BB%D1%8C%D0%BD%D0%B8%D0%BA%D0%B0-%D0%BD%D0%B0%D0%B2%D0%B0%D0%BD%D1%82%D0%B0%D0%B6%D0%B5%D0%BD%D0%BD%D1%8F-haproxy/</guid>
        <description>&lt;img src="https://blog.moroz.cc/post/listen-https-and-openvpn-server-on-same-443-port-using-haproxy-load-balancer/header.png" alt="Featured image of post Запуск HTTPS і OpenVPN на одному порту 443 за допомогою балансувальника навантаження HAProxy" /&gt;&lt;h2 id=&#34;вступ&#34;&gt;Вступ&lt;/h2&gt;
&lt;h3 id=&#34;які-причини-для-запуску-openvpn-і-веб-сервера-на-одному-порту-443&#34;&gt;Які причини для запуску OpenVPN і веб-сервера на одному порту 443&lt;/h3&gt;
&lt;p&gt;Уявімо, що у вас є сервер OpenVPN, який слухає порт 1194, і ви підключаєтеся з публічної або робочої мережі, яку ви не контролюєте. У цьому випадку може виникнути ситуація, коли дозволені лише вихідні підключення до загальних портів (наприклад, 80 і 443, щоб користувач міг лише переглядати веб-сторінки), тому ви не можете підключитися до свого сервера OpenVPN і зашифрувати трафік від адміністратора мережі.&lt;/p&gt;
&lt;p&gt;У цьому конкретному випадку ви можете спробувати перемістити службу OpenVPN для прослуховування через порт 443. Але що робити, якщо ви також використовуєте свій сервер для розміщення деяких веб-сайтів, тому порт 443 уже використовується? Щоб вирішити цю проблему, доцільно використовувати проксі-сервер або рішення для балансування навантаження та перенаправляти мережевий трафік із вхідного порту 443 на відповідний порт локальної служби 1194, 8080 тощо.&lt;/p&gt;
&lt;h3 id=&#34;як-це-працює&#34;&gt;Як це працює&lt;/h3&gt;
&lt;p&gt;Ви можете налаштувати HAProxy на завершення SSL, а потім маршрутизацію трафіку на основі SNI (Індикація імені сервера) або інших критеріїв на ваш сервер OpenVPN або на інші веб-сайти. Ось загальний огляд того, як цього досягти:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Завершення SSL:&lt;/strong&gt; HAProxy оброблятиме вхідні з’єднання SSL на порту 443. Він розшифровуватиме трафік, перевірятиме його, а потім вирішуватиме, куди його пересилати.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Маршрутизація трафіку:&lt;/strong&gt; На основі таких критеріїв, як запитане ім’я хоста або вміст початкових пакетів, HAProxy може скеровувати трафік на різні внутрішні сервери:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Трафік HTTPS можна перенаправляти на ваші веб-сервери.&lt;/li&gt;
&lt;li&gt;Трафік OpenVPN можна перенаправляти на сервер OpenVPN.&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;strong&gt;Приховування VPN-трафіку:&lt;/strong&gt; Завдяки обслуговуванню OpenVPN на порту 443 мережевим адміністраторам стає важче відрізнити звичайний трафік HTTPS від трафіку VPN. Це може допомогти в середовищах, де використання VPN обмежено або контролюється.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;налаштування&#34;&gt;Налаштування&lt;/h2&gt;
&lt;p&gt;Посібник зі встановлення припускає, що ви вже запустили ці служби у своїй системі:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Служба OpenVPN працює в режимі TCP.&lt;/li&gt;
&lt;li&gt;Одна або декілька веб-служб http.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Особисто я запускаю кожну веб-службу як контейнери докерів (докерів компонування) і прив’язую їхні http-порти до якогось вільного порту на локальному хості (наприклад, кілька веб-програм працюють на локальному інтерфейсі, але різні порти &lt;code&gt;http://localhost:20001&lt;/code&gt;, &lt;code&gt; http://localhost:20002&lt;/code&gt; тощо).&lt;/p&gt;
&lt;h3 id=&#34;встановіть-haproxy&#34;&gt;Встановіть HAProxy&lt;/h3&gt;
&lt;p&gt;Спочатку встановіть HAProxy у вашу систему:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo apt install haproxy&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Потім увімкніть і запустіть systemd демон HAProxy:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; --now haproxy.service&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;налаштуйте-haproxy&#34;&gt;Налаштуйте HAProxy&lt;/h3&gt;
&lt;p&gt;Розмістіть свої сертифікати SSL у &lt;code&gt;/etc/ssl/haproxy&lt;/code&gt;. Каталог і сертифікати мають бути доступні лише для користувача root. Наприклад, якщо у вас є домени &lt;code&gt;domain1.com&lt;/code&gt;, &lt;code&gt;domain2.com&lt;/code&gt;, для яких ви хочете розмістити веб-сервіси, ви повинні мати сертифікат і пари ключів для кожного домену в каталозі з відповідним іменуванням, наприклад:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;domain1.com.pem&lt;/li&gt;
&lt;li&gt;domain1.com.pem.key&lt;/li&gt;
&lt;li&gt;domain2.com.pem&lt;/li&gt;
&lt;li&gt;domain2.com.pem.key&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Потім відредагуйте файл &lt;code&gt;/etc/haproxy/haporxy.cfg&lt;/code&gt; і додайте необхідні розділи.&lt;/p&gt;
&lt;h3 id=&#34;визначте-backend-для-веб-програм-і-openvpn&#34;&gt;Визначте backend для веб-програм і OpenVPN.&lt;/h3&gt;
&lt;p&gt;Наприклад, якщо є 2 веб-сайти, які слухають порти 20001, 20002, а OpenVPN – порт 1194, конфігурація буде такою:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;backend openvpn
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    mode tcp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    timeout connect 30s
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    timeout server 30s
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    retries 3
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    server vpn 127.0.0.1:1194
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;backend app1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    mode http
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    server node01 127.0.0.1:20001
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;backend app2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    mode http
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    server node01 127.0.0.1:20002
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;налаштуйте-балансування-https&#34;&gt;Налаштуйте балансування HTTPS&lt;/h3&gt;
&lt;p&gt;Далі нам потрібно створити інтерфейс, який буде прив’язаний до &lt;code&gt;localhost:8443&lt;/code&gt; і керуватиме перенаправленням на основі домену. Це дозволить розміщувати веб-програми для кількох доменів. Також слід створити бекенд для &lt;code&gt;localhost:8443&lt;/code&gt;, він буде використовуватися пізніше для підключення з інтерфейсу порту, який буде прослуховуватися на вхідному порту 443.&lt;/p&gt;
&lt;p&gt;У цьому прикладі підключення перенаправляється до відповідної веб-програми на основі перевірки SNI домену, наприклад:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;frontend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;https&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;bind&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;127.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8443&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssl&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;crt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ssl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;redirect&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;scheme&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;https&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unless&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssl_fc&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;header&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Forwarded&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Proto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;https&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;header&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Strict&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Transport&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Security&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;max-age=16000000; includeSubDomains; preload;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;use_backend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;app1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssl_fc_sni&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;domain1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;com&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;use_backend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;app2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssl_fc_sni&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;domain2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;com&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;backend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp_to_https&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;https&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;127.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8443&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;налаштуйте-frontend-для-публічного-порту-443&#34;&gt;Налаштуйте frontend для публічного порту 443&lt;/h3&gt;
&lt;p&gt;Це основний frontend, який прослуховується на загальнодоступному порту 443 і керує перенаправленням на необхідний сервер на основі SNI.&lt;/p&gt;
&lt;p&gt;Спочатку він перевіряє, чи SNI закінчується деякими з математичних доменів (domain1.com або domain2.com). Цей вид перевірки дозволяє розмістити будь-який субдомен у майбутньому (наприклад, &lt;code&gt;dev.domain1.com&lt;/code&gt;, &lt;code&gt;prod.domain2.com&lt;/code&gt; тощо). І врешті-решт, якщо перевірка SNI не пройдена, це означає, що підключення має бути до OpenVPN, це правило визначено як стандартне.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;frontend tls
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    bind *:443
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    mode tcp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    option tcplog
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    tcp-request inspect-delay 5s
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    tcp-request content accept if { req_ssl_hello_type 1 } or !{ req_ssl_hello_type 1 }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    use_backend tcp_to_https if { req_ssl_sni -m end .domain1.com }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    use_backend tcp_to_https if { req_ssl_sni -m end .domain2.com }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    default_backend openvpn
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;приклад-повної-конфігурації&#34;&gt;Приклад повної конфігурації&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;global&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dev&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt;	&lt;span class=&#34;n&#34;&gt;local0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dev&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt;	&lt;span class=&#34;n&#34;&gt;local1&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;notice&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;chroot&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;var&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lib&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;socket&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;admin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sock&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;660&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;level&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;admin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;user&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;daemon&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# Default SSL material locations&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ca&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ssl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;certs&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;crt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ssl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;private&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# See: https://ssl-config.mozilla.org/#server=haproxy&amp;amp;server-version=2.0.3&amp;amp;config=intermediate&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ssl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bind&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ciphers&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ECDHE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ECDSA&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AES128&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GCM&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHA256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ECDHE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RSA&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AES128&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GCM&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHA256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ECDHE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ECDSA&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AES256&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GCM&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHA384&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ECDHE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RSA&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AES256&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GCM&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHA384&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ECDHE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ECDSA&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CHACHA20&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;POLY1305&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ECDHE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RSA&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CHACHA20&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;POLY1305&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DHE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RSA&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AES128&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GCM&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHA256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DHE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RSA&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AES256&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GCM&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SHA384&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ssl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bind&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ciphersuites&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TLS_AES_128_GCM_SHA256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TLS_AES_256_GCM_SHA384&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TLS_CHACHA20_POLY1305_SHA256&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ssl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bind&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;options&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ver&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TLSv1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;no&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tickets&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;defaults&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nb&#34;&gt;log&lt;/span&gt;	&lt;span class=&#34;n&#34;&gt;global&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;option&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;httplog&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;option&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dontlognull&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;client&lt;/span&gt;  &lt;span class=&#34;mi&#34;&gt;50000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt;  &lt;span class=&#34;mi&#34;&gt;50000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;errorfile&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;400&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;400.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;errorfile&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;403&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;403.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;errorfile&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;408&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;408.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;errorfile&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;500&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;500.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;errorfile&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;502&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;502.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;errorfile&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;503&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;503.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;errorfile&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;504&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;504.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;frontend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tls&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;bind&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;443&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;option&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcplog&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;inspect&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;delay&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;content&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;accept&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;req_ssl_hello_type&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;req_ssl_hello_type&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;use_backend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp_to_https&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;req_ssl_sni&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;domain1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;com&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;use_backend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp_to_https&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;req_ssl_sni&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;domain2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;com&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;default_backend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;openvpn&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;frontend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;https&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;bind&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;127.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8443&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssl&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;crt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ssl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;haproxy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;redirect&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;scheme&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;https&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unless&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssl_fc&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;header&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Forwarded&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Proto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;https&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;header&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Strict&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Transport&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Security&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;max-age=16000000; includeSubDomains; preload;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;use_backend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;app1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssl_fc_sni&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;domain1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;com&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;use_backend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;app2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ssl_fc_sni&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;domain2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;com&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;backend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp_to_https&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;https&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;127.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8443&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;backend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;openvpn&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;retries&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vpn&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;127.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1194&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;backend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;app1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;node01&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;127.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20001&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;backend&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;app2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;node01&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;127.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20002&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;додатково&#34;&gt;Додатково&lt;/h2&gt;
&lt;h3 id=&#34;як-перевірити-конфігурацію-haproxy&#34;&gt;Як перевірити конфігурацію HAProxy&lt;/h3&gt;
&lt;p&gt;HAProxy може перевірити файл конфігурації та повідомити вам, якщо є якась помилка.&lt;/p&gt;
&lt;p&gt;Щоб перевірити конфігурацію, запустіть:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo haporxy -c -f /etc/haproxy/haproxy.cfg&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;як-застосувати-зміни-haproxy&#34;&gt;Як застосувати зміни HAProxy&lt;/h3&gt;
&lt;p&gt;Щоб застосувати зміни до конфігурації HAProxy, просто перезапустіть демон:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo systemctl restart --now haproxy.service&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;висновок&#34;&gt;Висновок&lt;/h2&gt;
&lt;p&gt;Використання HAProxy для обробки завершення SSL і мультиплексування трафіку через порт 443 може бути ефективним способом приховати використання VPN і обійти мережеві обмеження. Це налаштування може бути особливо корисним у середовищах, де відкритий лише порт 443 або трафік VPN активно відстежується та обмежений. Ретельно налаштувавши HAProxy, ви можете створити гнучке та безпечне рішення, яке відповідає вашим потребам.&lt;/p&gt;
&lt;h3 id=&#34;переваги&#34;&gt;Переваги&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Мультиплексування портів:&lt;/strong&gt; використання порту 443 як для VPN, так і для веб-трафіку дозволяє обійти мережеві обмеження, які дозволяють лише порт 443.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Приховування використання VPN:&lt;/strong&gt; завдяки обслуговуванню OpenVPN на порту 443 трафік VPN змішується зі звичайним трафіком HTTPS, що ускладнює його виявлення та блокування.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Гнучкість:&lt;/strong&gt; ви можете працювати з кількома службами на одній IP-адресі та порту, зменшуючи кількість відкритих портів і спрощуючи правила брандмауера.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;що-треба-мати-на-увазі&#34;&gt;Що треба мати на увазі&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Виявлення:&lt;/strong&gt; хоча цей метод може допомогти обійти деякі обмеження, складні інструменти моніторингу мережі все ще можуть потенційно виявляти трафік OpenVPN на основі шаблонів трафіку та поведінки, навіть на порту 443.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Продуктивність:&lt;/strong&gt; HAProxy має розшифровувати та перевіряти трафік SSL, що може збільшити витрати. Переконайтеся, що ваш сервер має достатньо ресурсів для обробки додаткового навантаження.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Безпека:&lt;/strong&gt; завершення SSL на HAProxy означає, що він виконує шифрування та дешифрування. Переконайтеся, що HAProxy і сервер, на якому він працює, захищені й оновлюються.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>Розгортання служби OpenVPN на будь-якому сервері Linux за допомогою скрипта</title>
        <link>https://blog.moroz.cc/uk/post/%D1%80%D0%BE%D0%B7%D0%B3%D0%BE%D1%80%D1%82%D0%B0%D0%BD%D0%BD%D1%8F-%D1%81%D0%BB%D1%83%D0%B6%D0%B1%D0%B8-openvpn-%D0%BD%D0%B0-%D0%B1%D1%83%D0%B4%D1%8C-%D1%8F%D0%BA%D0%BE%D0%BC%D1%83-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D1%96-linux-%D0%B7%D0%B0-%D0%B4%D0%BE%D0%BF%D0%BE%D0%BC%D0%BE%D0%B3%D0%BE%D1%8E-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%B0/</link>
        <pubDate>Thu, 06 Jun 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.moroz.cc/uk/post/%D1%80%D0%BE%D0%B7%D0%B3%D0%BE%D1%80%D1%82%D0%B0%D0%BD%D0%BD%D1%8F-%D1%81%D0%BB%D1%83%D0%B6%D0%B1%D0%B8-openvpn-%D0%BD%D0%B0-%D0%B1%D1%83%D0%B4%D1%8C-%D1%8F%D0%BA%D0%BE%D0%BC%D1%83-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D1%96-linux-%D0%B7%D0%B0-%D0%B4%D0%BE%D0%BF%D0%BE%D0%BC%D0%BE%D0%B3%D0%BE%D1%8E-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%B0/</guid>
        <description>&lt;img src="https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/header.png" alt="Featured image of post Розгортання служби OpenVPN на будь-якому сервері Linux за допомогою скрипта" /&gt;&lt;h2 id=&#34;огляд-openvpn&#34;&gt;Огляд OpenVPN&lt;/h2&gt;
&lt;p&gt;OpenVPN — це популярне програмне забезпечення з відкритим кодом, яке реалізує методи віртуальної приватної мережі (VPN) для створення безпечних з’єднань «точка-точка» або «сайт-сайт». Він широко використовується завдяки своїй гнучкості, надійній безпеці та здатності проходити транслятори мережевих адрес (NAT) і брандмауери. Зокрема, сервер OpenVPN — це сервер, налаштований для обробки підключень OpenVPN, що дозволяє клієнтам безпечно підключатися через мережу, як правило, через Інтернет.&lt;/p&gt;
&lt;h3 id=&#34;основні-характеристики-openvpn&#34;&gt;Основні характеристики OpenVPN&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Шифрування та безпека:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;OpenVPN використовує надійні методи шифрування для безпечної передачі даних. Він підтримує різні алгоритми шифрування, такі як AES (Advanced Encryption Standard), який користується широкою довірою через його безпеку.&lt;/li&gt;
&lt;li&gt;Він використовує SSL/TLS для обміну ключами, гарантуючи, що навіть якщо з&amp;rsquo;єднання перехоплено, дані не можуть бути легко розшифровані.&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Кросплатформна сумісність:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;OpenVPN сумісний з кількома операційними системами, включаючи Windows, Linux, macOS, iOS і Android. Це робить його універсальним вибором для широкого діапазону пристроїв.&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Автентифікація:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Він підтримує кілька методів автентифікації, включаючи ім&amp;rsquo;я користувача/пароль, на основі сертифіката та багатофакторну автентифікацію (MFA). Ця гнучкість забезпечує підвищену безпеку, адаптовану до різних випадків використання.&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Конфігурація та гнучкість:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;OpenVPN можна налаштувати для роботи на будь-якому порту за допомогою TCP або UDP, що допомагає уникнути мережевих обмежень і спрощує проникнення через брандмауери.&lt;/li&gt;
&lt;li&gt;Він підтримує як мережі VPN типу &amp;ldquo;сайт-сайт&amp;rdquo;, які з&amp;rsquo;єднують цілі мережі, так і мережі VPN &amp;ldquo;клієнт-сервер&amp;rdquo;, які підключають окремі пристрої до мережі.&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;Масштабованість:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;OpenVPN можна масштабувати для підтримки великої кількості користувачів і складних конфігурацій мережі, що робить його придатним як для малих, так і для великих підприємств.&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;Відкритий код:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Відкритий код означає, що код програмного забезпечення є загальнодоступним для перегляду, що робить його більш прозорим і дозволяє спільноті робити внесок у його безпеку та розвиток.&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;Підтримка різних мережевих топологій:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Його можна використовувати в маршрутизованих або мостових конфігураціях і створювати безпечні з&amp;rsquo;єднання через NAT.&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;Обхід обмежень:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;OpenVPN ефективно обходить мережеві обмеження, що робить його популярним вибором для користувачів у регіонах із жорсткою інтернет-цензурою.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;переваги-та-недоліки&#34;&gt;Переваги та недоліки&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Переваги:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Високий рівень безпеки з надійним шифруванням і різними параметрами автентифікації.&lt;/li&gt;
&lt;li&gt;Гнучкість конфігурації та адаптованість до різних мережевих середовищ.&lt;/li&gt;
&lt;li&gt;Сумісність з кількома операційними системами та пристроями.&lt;/li&gt;
&lt;li&gt;Відкритий вихідний код забезпечує прозорість і вдосконалення, керовані спільнотою.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Недоліки:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Початкове налаштування та налаштування можуть бути складними, особливо для користувачів без досвіду роботи в мережі.&lt;/li&gt;
&lt;li&gt;На продуктивність можуть впливати такі фактори, як завантаження сервера та затримка мережі.&lt;/li&gt;
&lt;li&gt;Вимагає обслуговування та оновлень для забезпечення постійної безпеки та функціональності.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;встановлення&#34;&gt;Встановлення&lt;/h2&gt;
&lt;h3 id=&#34;завантаження-скрипта&#34;&gt;Завантаження скрипта&lt;/h3&gt;
&lt;p&gt;Найпростіший спосіб інсталювати послугу OpenVPN на будь-якій ОС Linux – це використовувати спеціальний &lt;a class=&#34;link&#34; href=&#34;https://github.com/angristan/openvpn-install&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;скрипт інсталяції openvpn&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Спочатку увійдіть на віддалений сервер за допомогою SSH, потім завантажте сценарій і зробіть його виконуваним:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget https://raw.githubusercontent.com/angristan/openvpn-install/master/openvpn-install.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo chmod +x openvpn-install.sh&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;розгорніть-службу-openvpn&#34;&gt;Розгорніть службу OpenVPN&lt;/h3&gt;
&lt;p&gt;Запустіть інсталяційний сценарій, також переконайтеся, що він запущений з правами root:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo ./openvpn-install.sh&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Сценарій є інтерактивним, і наступні кроки встановлення вимагають лише відповісти на запитання або залишити відповідь за умовчанням.&lt;/p&gt;
&lt;h4 id=&#34;визначте-адресу-прослуховування&#34;&gt;Визначте адресу прослуховування&lt;/h4&gt;
&lt;p&gt;Це мережева адреса локальної мережі, яку служба OpenVPN прив’язуватиме та прослуховуватиме.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_093722.png&#34;
	width=&#34;980&#34;
	height=&#34;208&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_093722_hu11835490991283329849.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_093722_hu16730718594315454199.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;471&#34;
		data-flex-basis=&#34;1130px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;визначте-публічну-ip-адресу&#34;&gt;Визначте публічну IP-адресу&lt;/h4&gt;
&lt;p&gt;Це загальнодоступна IP-адреса вашого сервера в Інтернеті. Сценарій припускає, що у вас статичний глобальний IP.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_093828.png&#34;
	width=&#34;978&#34;
	height=&#34;94&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_093828_hu9650783926718849735.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_093828_hu7076724111708133051.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;1040&#34;
		data-flex-basis=&#34;2497px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;налаштування-підтримки-ipv6&#34;&gt;Налаштування підтримки IPv6&lt;/h4&gt;
&lt;p&gt;Оскільки я не маю підтримки IPv6 ні в моїй локальній мережі, ні мій інтернет-провайдер не підтримує її, я просто вимкну IPv6.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094037.png&#34;
	width=&#34;980&#34;
	height=&#34;126&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094037_hu9611146055587325175.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094037_hu3691886562778154573.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;777&#34;
		data-flex-basis=&#34;1866px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;визначте-порт-прослуховування&#34;&gt;Визначте порт прослуховування&lt;/h4&gt;
&lt;p&gt;Ви можете вибрати будь-який порт, який служба OpenVPN буде прив’язувати та прослуховувати вхідні з’єднання.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094121.png&#34;
	width=&#34;980&#34;
	height=&#34;127&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094121_hu4849275297742617897.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094121_hu13553429190500592506.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;771&#34;
		data-flex-basis=&#34;1851px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;визначте-протокол&#34;&gt;Визначте протокол&lt;/h4&gt;
&lt;p&gt;Рекомендується використовувати UDP, якщо вам не потрібен TCP для певних конфігурацій або через обмеження мережевого стеку вашого сервера.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094216.png&#34;
	width=&#34;978&#34;
	height=&#34;124&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094216_hu10625142996558916314.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094216_hu6971832501653071497.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;788&#34;
		data-flex-basis=&#34;1892px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;виберіть-основний-сервер-dns&#34;&gt;Виберіть основний сервер DNS&lt;/h4&gt;
&lt;p&gt;Тут ви можете вибрати будь-який загальнодоступний відомий розпізнавач DNS або навіть визначити власний DNS-сервер. Я рекомендую використовувати резолвер OpenDNS.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094303.png&#34;
	width=&#34;980&#34;
	height=&#34;336&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094303_hu5458968244409787573.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094303_hu4895425890596583214.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;291&#34;
		data-flex-basis=&#34;700px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;вимкнути-стиснення&#34;&gt;Вимкнути стиснення&lt;/h4&gt;
&lt;p&gt;Настійно не рекомендується використовувати стиснення через відомі обмеження безпеки.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094414.png&#34;
	width=&#34;980&#34;
	height=&#34;60&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094414_hu15790650347970908598.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094414_hu16304101232571851280.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;1633&#34;
		data-flex-basis=&#34;3920px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;налаштування-параметрів-шифрування&#34;&gt;Налаштування параметрів шифрування&lt;/h4&gt;
&lt;p&gt;На цьому кроці ви можете налаштувати параметри шифрування, якщо вам потрібні певні налаштування, але також добре використовувати попередньо визначену конфігурацію.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094504.png&#34;
	width=&#34;980&#34;
	height=&#34;183&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094504_hu10578866037176762233.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094504_hu2119003778766715629.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;535&#34;
		data-flex-basis=&#34;1285px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;перевірте-параметри&#34;&gt;Перевірте параметри&lt;/h4&gt;
&lt;p&gt;Після того, як ви визначили всі параметри, ви можете прокрутити термінал і перевірити свої відповіді майстру. Якщо все в порядку, просто натисніть будь-яку кнопку, щоб продовжити встановлення.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094600.png&#34;
	width=&#34;978&#34;
	height=&#34;80&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094600_hu11580938189810458216.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_094600_hu357255550679396012.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;1222&#34;
		data-flex-basis=&#34;2934px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;налаштування-конфігурації-клієнта&#34;&gt;Налаштування конфігурації клієнта&lt;/h4&gt;
&lt;p&gt;Необхідний крок для створення принаймні однієї конфігурації клієнта.&lt;/p&gt;
&lt;p&gt;Спочатку визначте ім&amp;rsquo;я клієнта:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_095317.png&#34;
	width=&#34;978&#34;
	height=&#34;83&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_095317_hu9273606914115903615.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_095317_hu14888182707493261668.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;1178&#34;
		data-flex-basis=&#34;2827px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Далі у вас є можливість захистити конфігурацію *.ovpn паролем:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_095352.png&#34;
	width=&#34;980&#34;
	height=&#34;123&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_095352_hu9943214028975678341.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/Screenshot_20240607_095352_hu10911092971922333105.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;796&#34;
		data-flex-basis=&#34;1912px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;завантажте-конфігурацію-клієнта&#34;&gt;Завантажте конфігурацію клієнта&lt;/h3&gt;
&lt;p&gt;Найбезпечнішим способом є використання SFTP-з’єднання з сервером вашої файлової системи, ви можете скористатися однією командою в локальному терміналі, щоб завантажити його:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;scp shifthackz@192.168.0.37:/home/shifthackz/pixel7pro.ovpn ~&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Де слід замінити своїми значеннями:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;shifthackz@192.168.0.37&lt;/code&gt;: тут визначте користувача вашого сервера та IP-адресу.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/home/shifthackz/pixel7pro.ovpn&lt;/code&gt;: це шлях до файлу на ВІДДАЛЕНОМУ сервері.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;~&lt;/code&gt;: це шлях до цільової папки завантаження на ЛОКАЛЬНОМУ комп’ютері (у моєму випадку ~ це домашній каталог поточного користувача).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Потім передайте цей файл на пристрій, який ви хочете використовувати як клієнт для підключення до вашого сервера openvpn.&lt;/p&gt;
&lt;h3 id=&#34;перевірте-підключення-клієнта&#34;&gt;Перевірте підключення клієнта&lt;/h3&gt;
&lt;p&gt;У цьому прикладі я буду підключатися до своєї мережі VPN за допомогою телефону Android. Спочатку перенесіть завантажений файл *.ovpn на свій телефон та імпортуйте його.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/a1.png&#34;
	width=&#34;436&#34;
	height=&#34;875&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/a1_hu3562169309634839186.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/a1_hu68721785652129530.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Додайте новий профіль OpenVPN.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;49&#34;
		data-flex-basis=&#34;119px&#34;
	
&gt;
&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/a2.png&#34;
	width=&#34;436&#34;
	height=&#34;873&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/a2_hu2237769961639447552.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/a2_hu15477384149532312955.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Підтвердити імпорт.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;49&#34;
		data-flex-basis=&#34;119px&#34;
	
&gt;
&lt;img src=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/a3.png&#34;
	width=&#34;436&#34;
	height=&#34;875&#34;
	srcset=&#34;https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/a3_hu6425126588364808073.png 480w, https://blog.moroz.cc/post/easy-deploy-openvpn-service-on-any-linux-server-using-custom-script/a3_hu13466588910935383036.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Перевірте підключення до сервера OpenVPN.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;49&#34;
		data-flex-basis=&#34;119px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Після цього спробуйте відкрити якийсь веб-сайт у браузері та переконайтеся, що підключення до Інтернету працює. Крім того, спробуйте перевірити свою IP-адресу на деяких загальнодоступних веб-сайтах перевірки IP-адреси, у вас повинна бути публічна IP-адреса сервера OpenVPN. Також ви повинні мати доступ до деяких локальних пристроїв у тій самій локальній мережі, що й сервер OpenVPN.&lt;/p&gt;
&lt;h2 id=&#34;висновок&#34;&gt;Висновок&lt;/h2&gt;
&lt;p&gt;Загалом сервер OpenVPN є потужним інструментом для створення безпечних, гнучких і надійних VPN-з’єднань, що робить його популярним вибором як для окремих осіб, так і для організацій, які прагнуть захистити свої дані та мережеві комунікації.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Виготовлення пристрою PiKVM v2 для віддаленого керування комп’ютером або сервером (KVM через IP)</title>
        <link>https://blog.moroz.cc/uk/post/%D0%B2%D0%B8%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D1%8F-%D0%BF%D1%80%D0%B8%D1%81%D1%82%D1%80%D0%BE%D1%8E-pikvm-v2-%D0%B4%D0%BB%D1%8F-%D0%B2%D1%96%D0%B4%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BA%D0%B5%D1%80%D1%83%D0%B2%D0%B0%D0%BD%D0%BD%D1%8F-%D0%BA%D0%BE%D0%BC%D0%BF%D1%8E%D1%82%D0%B5%D1%80%D0%BE%D0%BC-%D0%B0%D0%B1%D0%BE-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BE%D0%BC-kvm-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-ip/</link>
        <pubDate>Fri, 29 Mar 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.moroz.cc/uk/post/%D0%B2%D0%B8%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D1%8F-%D0%BF%D1%80%D0%B8%D1%81%D1%82%D1%80%D0%BE%D1%8E-pikvm-v2-%D0%B4%D0%BB%D1%8F-%D0%B2%D1%96%D0%B4%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BA%D0%B5%D1%80%D1%83%D0%B2%D0%B0%D0%BD%D0%BD%D1%8F-%D0%BA%D0%BE%D0%BC%D0%BF%D1%8E%D1%82%D0%B5%D1%80%D0%BE%D0%BC-%D0%B0%D0%B1%D0%BE-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BE%D0%BC-kvm-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-ip/</guid>
        <description>&lt;img src="https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/header.jpg" alt="Featured image of post Виготовлення пристрою PiKVM v2 для віддаленого керування комп’ютером або сервером (KVM через IP)" /&gt;&lt;h2 id=&#34;ознайомлення-з-kvm-через-ip&#34;&gt;Ознайомлення з KVM через IP&lt;/h2&gt;
&lt;p&gt;KVM через IP (клавіатура, відео, миша через IP) — це технологія, яка забезпечує віддалений доступ і керування комп’ютером або сервером через мережеве з’єднання. Це дозволяє користувачам керувати сервером або ПК так, ніби вони фізично присутні біля машини, незалежно від їхнього розташування.&lt;/p&gt;
&lt;h3 id=&#34;принцип-роботи&#34;&gt;Принцип роботи&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Апаратний пристрій&lt;/strong&gt;: KVM через IP являя собою апаратний пристрій, встановлений на сервері або інтегрований у апаратне забезпечення сервера. Цей пристрій підключається до портів клавіатури, відео та миші сервера.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Мережеве підключення&lt;/strong&gt;: потім пристрій KVM через IP підключається до мережі інтернет, що забезпечує віддалений доступ до сервера.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Програмне забезпечення для доступу&lt;/strong&gt;: користувачі можуть отримати віддалений доступ до консолі сервера за допомогою спеціального програмного забезпечення, наданого виробником пристрою KVM через IP. Це програмне забезпечення дозволяє користувачам переглядати екран сервера, керувати введенням даних з клавіатури та миші та взаємодіяти з сервером так, ніби вони фізично присутні.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Функції безпеки&lt;/strong&gt;: рішення KVM через IP часто мають такі функції безпеки, як шифрування та автентифікація, щоб забезпечити безпечний віддалений доступ до сервера.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;переваги-kvm-над-програмним-забезпеченням-віддаленого-робочого-столу&#34;&gt;Переваги KVM над програмним забезпеченням віддаленого робочого столу&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Доступ низького рівня&lt;/strong&gt;: KVM через IP забезпечує доступ низького рівня до сервера, дозволяючи користувачам взаємодіяти з сервером або ПК на рівні BIOS та під час процесу завантаження. Цей рівень доступу зазвичай недоступний для програмних рішень для віддаленого робочого столу, які працюють у середовищі операційної системи.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Незалежність від операційної системи&lt;/strong&gt;: оскільки KVM через IP працює на апаратному рівні, такі апаратні засоби не залежить від операційної системи сервера. Це означає, що його можна використовувати для усунення несправностей і керування серверами та ПК, навіть якщо операційна система не відповідає або не працює.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Управління поза діапазоном&lt;/strong&gt;: KVM через IP забезпечує можливості керування поза діапазоном, дозволяючи адміністраторам отримувати віддалений доступ і керувати серверами, навіть якщо мережа або операційна система не працює. Це може бути вирішальним для завдань з усунення несправностей і обслуговування.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Продуктивність&lt;/strong&gt;: рішення KVM через IP часто забезпечують кращу продуктивність порівняно з програмними рішеннями для віддаленого робочого столу, особливо для завдань, які вимагають низької затримки та високої роздільної здатності.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Встановлення програмного забезпечення не вимагається&lt;/strong&gt;: оскільки KVM через IP є апаратним рішенням, воно не потребує встановлення програмного забезпечення на стороні сервера, що може спростити розгортання та обслуговування.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;огляд-апаратних-рішень&#34;&gt;Огляд апаратних рішень&lt;/h2&gt;
&lt;h3 id=&#34;промислові-перемикачі-kvm&#34;&gt;Промислові перемикачі KVM&lt;/h3&gt;
&lt;p&gt;На ринку доступно багато пристроїв KMV через IP, але вони мають деякі недоліки, якщо вам потрібне доступне рішення для особистого використання, яке включає такі ключові моменти:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Вартість&lt;/strong&gt;: промислові апаратні рішення KVM зазвичай передбачають вищі витрати порівняно з рішеннями з відкритим кодом, оскільки вони часто мають додаткові функції та послуги підтримки.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Пропрієтарне програмне забезпечення&lt;/strong&gt;: більшість KVM-перемикачів, які виготовляються для виробничого використання в серверних кімнатах і центрах обробки даних критичної інфраструктури, постачаються в комплекті з програмним забезпеченням із закритим вихідним кодом, яке має власну ліцензію.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;pikvm&#34;&gt;PiKVM&lt;/h3&gt;
&lt;p&gt;Найкращим рішенням для персональної домашньої серверної лабораторії або віддаленого керування ПК чи ноутбуком є &lt;a class=&#34;link&#34; href=&#34;https://pikvm.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;PiKVM&lt;/a&gt; – недороге рішення IP-KVM з відкритим вихідним кодом на основі одноплатного ARM комп’ютера &lt;a class=&#34;link&#34; href=&#34;https://www.raspberrypi.com/products/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Raspberry Pi&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;Пристрій &lt;a class=&#34;link&#34; href=&#34;https://pikvm.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;PiKVM&lt;/a&gt; має багато корисних функцій для керування віддаленою машиною, наприклад:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Симуляція дисків: це дозволяє прикріпити локальний файл *.iso до віддаленої машини, це дозволяє віддалено переінсталювати будь-яку ОС.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Імітація підключення/відключення USB периферії.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Контроль живленням ATX.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Якщо ви хочете стати власником пристрою &lt;a class=&#34;link&#34; href=&#34;https://pikvm.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;PiKVM&lt;/a&gt;, то для вас існує 2 варіанти:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Замовити готовий пристрій на офіційному сайті.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Придбайте одну з &lt;a class=&#34;link&#34; href=&#34;https://docs.pikvm.org/v2/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;підтримуваних&lt;/a&gt; плат Raspberry Pi, а також необхідні електронні компоненти та зберіть пристрій своїми руками.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;створення-власного-пристрою-pikvm-v2&#34;&gt;Створення власного пристрою PiKVM v2&lt;/h2&gt;
&lt;p&gt;Я вирішив самостійно створити пристрій PiKVM v2, оскільки для моєї країни немає варіантів доставки готових пристроїв. Крім того, збірка своїми руками дає більше гнучкості: можена створити пристрій відповідно до необхідних функцій, при цьоми обирати будь-які компоненти за власним бажанням.&lt;/p&gt;
&lt;h3 id=&#34;вибір-компонентів&#34;&gt;Вибір компонентів&lt;/h3&gt;
&lt;p&gt;Після вивчення офіційної документації PiKVM стає очевидним, що найкращою версією для збірки є PiKVM v2. Для виготовлення свого пристрою я використовував такі апаратні компоненти:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 x &lt;a class=&#34;link&#34; href=&#34;https://www.raspberrypi.com/products/raspberry-pi-4-model-b/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Raspberry Pi 4 Model B&lt;/a&gt; з 2 Гб оперативної пам&amp;rsquo;яті.&lt;/li&gt;
&lt;li&gt;1 x &lt;a class=&#34;link&#34; href=&#34;https://prom.ua/ua/p2056074929-blok-zhivlennya-gan.html?product_id=2056074929&amp;amp;category_ids=71109&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Блок живлення GAN 65W PD&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;1 x &lt;a class=&#34;link&#34; href=&#34;https://www.aliexpress.com/item/1005001880861192.html?spm=a2g0o.order_list.order_list_main.11.6b4f1802HEgPtC&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;HDMI USB карта захоплення відео&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;1 x Kingston SD картка пам&amp;rsquo;яті на 32 Gb 10-го класу.&lt;/li&gt;
&lt;li&gt;2 x USB-A до USB-C кабелі (для виготовлення спеціального кабелю живлення).&lt;/li&gt;
&lt;li&gt;1 X HDMI кабель.&lt;/li&gt;
&lt;li&gt;1 x 80мм вентилятор (для активного охолодження).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_20240330_172625_917.jpg&#34;
	width=&#34;2393&#34;
	height=&#34;1639&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_20240330_172625_917_hu521897210767238446.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_20240330_172625_917_hu8442927147312641795.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Комплектуючі необхідні для PiKVM.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;146&#34;
		data-flex-basis=&#34;350px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;виготовлення-спеціального-кабелю-живлення&#34;&gt;Виготовлення спеціального кабелю живлення&lt;/h3&gt;
&lt;p&gt;Щоб мати можливість керувати віддаленим комп’ютером через саморобний KVM пристрій, комп’ютер повинен розпізнавати наш пристрій як HID USB-пристрій, який сприйматиметься комп’ютером так само, як нібито це інша клавіатура чи миша (комп’ютерна клавіатура та миша також є HID-пристроями).&lt;/p&gt;
&lt;p&gt;Але плата Raspberry Pi 4 Model B має критичний недлоік – вона має лише один порт USB-C, який може працювати як пристрій HID, і цей порт також використовується для живлення пристрою. Щоб виправити таке функціональне обмеження, треба виготовити спеціальний кабель, що може одночасно працювати як USB-пристрій для цільового хоста та отримувати зовнішнє живлення від адаптера живлення.&lt;/p&gt;
&lt;p&gt;Щоб виготовити такий нестандартний кабель живлення, вам знадобляться 2 кабелі &lt;strong&gt;USB-A male до USB-C male&lt;/strong&gt;. Я рекомендую вибирати якісні кабелі, тому що для живлення плати сила струму становить 3А. Процес виготовлення кабелю включає наступні етапи:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Візьміть перший кабель і зріжте ізоляцію. Залиште дроти лінії передачі даних (зелений і білий) як є та відріжте дроти живлення +5В (червоний) і землю (чорний).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Візьміть другий кабель і відріжте його повністю. Нам потрібна лише частина USB-A.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Припаяйте провід живлення +5В (червоний) другої частини кабелю USB-A, до проводу живлення +5В (червоний) частини кабелю USB-C.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Припаяйте разом усі 3 заземлюючі (чорні) дроти всіх частин кабелю.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ретельно ізолюйте всі контакти.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Таким чином, роз’єм USB-C слід під’єднати до плати Raspberry Pi, роз’єм USB-A другого кабелю (того, до якого підключено живлення) слід під’єднати до адаптера живлення, а роз’єм USB-A першого кабелю (того, з дроти даних) слід підключити до ПК, яким ви хочете керувати. Для кращого розуміння нижче наведена схема пайки кабелю.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/v2_splitter_soldering.png&#34;
	width=&#34;977&#34;
	height=&#34;485&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/v2_splitter_soldering_hu4849882703031444457.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/v2_splitter_soldering_hu8442061173123843600.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Схема підключення роз&amp;rsquo;ємів спеціального кабелю живлення PiKVM v2.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;201&#34;
		data-flex-basis=&#34;483px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Також я рекомендую це відео на YouTube від розробника PiKVM, яке пояснює повний процес виготовлення цього спеціального кабелю.&lt;/p&gt;
&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe loading=&#34;lazy&#34; 
            src=&#34;https://www.youtube.com/embed/uLuBuQUF61o&#34; 
            allowfullscreen 
            title=&#34;YouTube Video&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;

&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Ось фото кабелю, що вийшов у мене. Я позначив усі сторони кабелю, щоб уникнути плутанини роз&amp;rsquo;ємів під час підключення обладнання. Чорний кабель USB-A повинен підключатися до адаптера живлення, білий кабель USB-A — до комп’ютера, а роз’єм USB-C — для плати Raspberry Pi.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_11.jpg&#34;
	width=&#34;1880&#34;
	height=&#34;2566&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_11_hu2026414388001268328.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_11_hu16173094001219447609.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Фінальний вигляд кастомного кабелю живлення.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;73&#34;
		data-flex-basis=&#34;175px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;збірка-пристрою-в-саморобному-корпусі&#34;&gt;Збірка пристрою в саморобному корпусі&lt;/h3&gt;
&lt;p&gt;Компоненти, які я використовую для створення пристрою, включають зовнішню плату захоплення відеосигналу HDMI, яку слід підключити до конкретного USB-порту плати Raspberry Pi. Для моїх потреб пристрій має бути портативним. Враховуючи це, офіційний корпус для Raspberry Pi дуже підходить, до того ж він коштує занадто дорого, на мій погляд. Тож я вирішив повністю зібрати пристрій та всі електронні компоненти в одному корпусі для кращої портативності. Кожен раз, коли мені потрібно використовувати його з іншим ПК, мені просто потрібно підключити до нього кабелі HDMI та USB.&lt;/p&gt;
&lt;p&gt;Також не секрет, що плати Rasperry Pi можуть перегріватися під час роботи в умовах екстремального навантаження на процесор або в умовах безперервної роботи 24/7. Беручи це до уваги, я вирішив сконструювати корпус таким чином, щоб усе обладнання охолоджувалося вентилятором 80мм.&lt;/p&gt;
&lt;p&gt;На жаль, у мене немає 3D-принтера, щоб спроектувати та створити якісний корпус, що мав би вигляд як у промислового пристрою. Мій корпус повністю ручної роботи. Я використовував переважно деякі старі пластикові панелі, що залишилися в мене після ремонту.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_15.jpg&#34;
	width=&#34;2566&#34;
	height=&#34;1736&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_15_hu5430315393519054372.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_15_hu5048984929459482917.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;PiKVM v2 пристрій зібраний в саморобному корпусі з пластикових панелей.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;147&#34;
		data-flex-basis=&#34;354px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_12.jpg&#34;
	width=&#34;2652&#34;
	height=&#34;1143&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_12_hu4437620323459149077.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_12_hu4141037336672872349.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Внутрішнє оснащення та розташування електронних компонентів саморобного пристрою PiKVM v2.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;232&#34;
		data-flex-basis=&#34;556px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Вентилятор можна підключити до відповідних контактів GPIO на платі. Для цього я використав контакт №2 для +5В (червоний дріт) і контакт №6 для мінусу (чорний дріт) живлення вентилятора.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/GPIO-Pinout-Diagram-2.png&#34;
	width=&#34;2064&#34;
	height=&#34;1185&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/GPIO-Pinout-Diagram-2_hu6469622565292939902.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/GPIO-Pinout-Diagram-2_hu8493741587978962470.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Схема GPIO розпіновки плати Raspberry Pi 4 Model B.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;174&#34;
		data-flex-basis=&#34;418px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Я використовував роз’єм що вже був у вентилятора, але мені довелося перепінувати контакти на цьому роз’ємі в правильному порядку.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_13.jpg&#34;
	width=&#34;2540&#34;
	height=&#34;1896&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_13_hu12008510141273031739.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_13_hu17939192236510261296.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Підключення вентилятора до плати Raspberry Pi використовуючи GPIO інтерфейс.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;133&#34;
		data-flex-basis=&#34;321px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Також я вирішив додатково винести порт RJ-45 Ethernet збоку, тому що при використання кабельного підключення до мережі інтернет якість потокового відео краща, а затримка менша на відміну від підключення черех Wi-Fi. Для цього я зробив спеціальний подовжувач кабелю та встановив порт біля порту HDMI.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_14.jpg&#34;
	width=&#34;2106&#34;
	height=&#34;1810&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_14_hu8701258946247665887.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_14_hu1196213390416759870.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Порти Ethernet RJ-45 та вхід HDMI змонтовані збоку пристрою.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;116&#34;
		data-flex-basis=&#34;279px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;прошивка-pikvm-os&#34;&gt;Прошивка PiKVM OS&lt;/h3&gt;
&lt;p&gt;Для того, щоб Raspberry Pi міг діяти як апаратний KVM-пристрій, слід записати на SD-карту образ операційної системи з відкритим вихідним кодом  PiKVM.&lt;/p&gt;
&lt;p&gt;Правильний образ PiKVM, який підходить для конкретної моделі Raspberry Pi, можна знайти на сторінці &lt;a class=&#34;link&#34; href=&#34;https://docs.pikvm.org/flashing_os/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;PiKVM Flashing OS&lt;/a&gt;. У моєму випадку я завантажив образ платформи DIY PiKVM V2, Raspberry Pi 4 що запрограмовано для використання з HDMI-USB картою захоплення. Образ повністю відповідає апаратному забезпеченню, яке я використовував (Raspblerry Pi 4 Model B і USB карта захоплення відео).&lt;/p&gt;
&lt;p&gt;Щоб записани образ ОС на SD-карту, існує програмне забезпечення &lt;a class=&#34;link&#34; href=&#34;https://github.com/raspberrypi/rpi-imager&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;RPI Imager&lt;/a&gt;. Оскільки я використовую Arch Linux, я встановив його з офіційного пакета &lt;a class=&#34;link&#34; href=&#34;https://archlinux.org/packages/extra/x86_64/rpi-imager/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;rpi-imager&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo pacman -S rpi-imager&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Потім слід підключити SD-карту до комп’ютера. Оскільки мій комп’ютер не має вбудованого кард-рідера, я використовую адаптер micro-SD до USB-A.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_10.jpg&#34;
	width=&#34;1864&#34;
	height=&#34;1310&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_10_hu14983050107056658618.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_10_hu16266499531716359489.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Адаптер Micro-SD до USB-A.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;142&#34;
		data-flex-basis=&#34;341px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Щоб записати образ на картку пам&amp;rsquo;яті, виконайте такі дії:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Відкрийте RPI Imager.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img0.png&#34;
	width=&#34;1166&#34;
	height=&#34;520&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img0_hu4100138426476572264.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img0_hu13042572613264874815.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Програмне забезпечення RPI Imager.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;224&#34;
		data-flex-basis=&#34;538px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Натисніть &amp;ldquo;Choose device&amp;rdquo; та виберіть модель вашої плати Raspberry Pi. В моєму випадку слід обрати &amp;ldquo;Raspberry Pi 4&amp;rdquo;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img1.png&#34;
	width=&#34;1161&#34;
	height=&#34;581&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img1_hu17840736908026554909.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img1_hu7671345283205519515.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Вибір моделі плати.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;199&#34;
		data-flex-basis=&#34;479px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Натисніть &amp;ldquo;Choose OS&amp;rdquo;, прокрутіть до самого низу та виберіть опцію &amp;ldquo;Use custom image&amp;rdquo;. Потім у файловому менеджері виберіть завантажений раніше образ PiKVM.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img2.png&#34;
	width=&#34;1161&#34;
	height=&#34;577&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img2_hu7402771228493788739.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img2_hu6518360933605357921.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Вибір кастомного образу.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;201&#34;
		data-flex-basis=&#34;482px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img3.png&#34;
	width=&#34;618&#34;
	height=&#34;403&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img3_hu669543994961920198.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img3_hu7619456056555602041.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Вибір файла образу.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;153&#34;
		data-flex-basis=&#34;368px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Натисніть &amp;ldquo;Choose storage&amp;rdquo; та виберіть картку пам&amp;rsquo;яті. Будьте обережні, та обирайте правильний пристрій, тому що RPI Imager відформатує вибраний пристрій.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img4.png&#34;
	width=&#34;1164&#34;
	height=&#34;579&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img4_hu5929997612728527642.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img4_hu2443087288622995189.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Вибір дискового пристрою.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;201&#34;
		data-flex-basis=&#34;482px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;Переконайтеся, що всі поля заповнено правильно та натисніть «Далі».&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img5.png&#34;
	width=&#34;1159&#34;
	height=&#34;574&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img5_hu11725796118393500652.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img5_hu979935376441915946.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Підготовка до запису.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;201&#34;
		data-flex-basis=&#34;484px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;Далі ви побачите модальне діалогове вікно із запитом, чи бажаєте ви налаштувати деякі параметри, натисніть «НІ».&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img6.png&#34;
	width=&#34;1160&#34;
	height=&#34;579&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img6_hu652147043370088316.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img6_hu3537579023227109840.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Діалогове вікно.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;200&#34;
		data-flex-basis=&#34;480px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;Наостанок підтвердьте процес спалаху пристрою та зачекайте, доки RPI Imager завершить спалах і перевірку зображення.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img7.png&#34;
	width=&#34;1160&#34;
	height=&#34;577&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img7_hu10932491511144931484.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-img7_hu1567695107752966645.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Підтвердження запису образу.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;201&#34;
		data-flex-basis=&#34;482px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;налаштування-підключення-до-wi-fi-необовязково&#34;&gt;Налаштування підключення до Wi-Fi (необов&amp;rsquo;язково)&lt;/h3&gt;
&lt;p&gt;Як я вже зазначав раніше, завжди краще використовувати кабельне інтернет з’єднання Ethernet RJ-45, оскільки воно надійніше та забезпечує кращу продуктивність відеопотоку та меншу затримку. Однак, оскільки я хочу, щоб пристрій був портативним, і я міг взяти його з собою та підключити до іншого комп&amp;rsquo;ютера, де, можливо, не буде можливості кабельного з’єднання. Для цього я встановлюю облікові дані Wi-Fi мережі точки доступу свого телефону на Android, який я завжди маю при собі, тому, коли плата Raspberry Pi завантажується без підключеного кабелю Ethernet, вона використовуватиме свій вбудований адаптер Wi-Fi і підключитися до мого телефону Android.&lt;/p&gt;
&lt;p&gt;Щоб налаштувати Wi-Fi, виконайте такі дії:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Підключіть SD-карту до комп&amp;rsquo;ютера.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ви побачите, що SD-карта має більше одного розділу, вам потрібно змонтувати перший розділ, який називається &amp;ldquo;PIBOOT&amp;rdquo;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-wifi0.png&#34;
	width=&#34;209&#34;
	height=&#34;163&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-wifi0_hu14393555490339550946.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/rpi-wifi0_hu5075913822542401670.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Розділи на картці пам&amp;rsquo;яті.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;128&#34;
		data-flex-basis=&#34;307px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;
&lt;p&gt;Знайдіть файл &lt;code&gt;pikvm.txt&lt;/code&gt; в кореневій папці розділу &amp;ldquo;PIBOOT&amp;rdquo;. Якщо файла не існує - створіть його вручну, якщо файл вже існує, не видаляйте з нього жодних конфігурацій, вам потрібно додати 2 параметри внизу файлу.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Додайте 2 параметри в кінець файлу. Замініть облікові дані у прикладі на облікові дані вашої мережі Wi-Fi.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;WIFI_ESSID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;my_wifi_network&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;WIFI_PASSWD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;the_most_secure_password_ever&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;Збережіть файл. Потім безпечно відключіть розділ і вийміть SD-карту. Встановіть SD-карту на плату.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;перше-завантаження&#34;&gt;Перше завантаження&lt;/h3&gt;
&lt;p&gt;Це важливий крок, оскільки під час першого завантаження PiKVM OS ініціалізує необхідні налаштування та генерує унікальні SSH-ключі та сертифікати безпеки.&lt;/p&gt;
&lt;p&gt;Для процедури першого завантаження виконайте такі кроки:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Встановіть SD-карту з прошитою ОС PiKVM на плату Raspberry Pi.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Підключіть плату Raspbery Pi до роутера за допомогою кабелю Ethernet RJ-45. Якщо у вас немає можливості використовувати Ethernet під час першого завантаження, ви можете налаштувати облікові дані Wi-Fi (як показано в попередньому кроці), але перед завантаженням переконайтеся, що мережа Wi-Fi доступна.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Завантажте плату Raspberry Pi. Для цього підключіть джерело живлення 5В 3А до порту USB-C на платі.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_9.jpg&#34;
	width=&#34;2652&#34;
	height=&#34;1997&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_9_hu11502581757241179101.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_9_hu16240494004164759524.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Процедура першого завантаження мого PiKVM пристрою.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;132&#34;
		data-flex-basis=&#34;318px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Зачекайте деякий час, поки ОС PiKVM завершить першу ініціалізацію. Цей процес може тривати до 10 хвилин.&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;🔴 &lt;strong&gt;ВАЖЛИВО:&lt;/strong&gt; не від’єднуйте кабель живлення від плати Raspberry Pi, доки не завершиться перша ініціалізація завантаження.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;Після завершення процесу першого завантаження пристрій PiKVM підключиться до мережі та отримає локальну IP-адресу в локальній мережі вашого маршрутизатора. Щоб визначити, яку IP-адресу отримав PiKVM, перейдіть на сторінку налаштувань маршрутизатора та знайдіть підключені пристрої.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;У моєму випадку плата отримала IP-адресу &lt;code&gt;192.168.0.222&lt;/code&gt;, тому я буду використовувати її в усіх наступних прикладах. У вашому випадку IP-адреса буде іншою.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/router.jpg&#34;
	width=&#34;1056&#34;
	height=&#34;955&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/router_hu5362032232056219576.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/router_hu4328767219862226543.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Пристрій PiKVM що підключено до локальної мережі роутера.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;110&#34;
		data-flex-basis=&#34;265px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;
&lt;p&gt;Далі вам потрібен комп’ютер або смартфон, який під’єднаний до тієї ж локальної мережі, що й пристрій PiKVM. Відкрийте веб-браузер і перейдіть до URL-адреси IP-адреси &lt;code&gt;https://192.168.0.222&lt;/code&gt;. Облікові дані за замовчуванням: логін &lt;code&gt;admin&lt;/code&gt; з паролем &lt;code&gt;admin&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Змініть стандартні паролі, щоб захистити свій пристрій. Детальний опис того, як це зробити, є в &lt;a class=&#34;link&#34; href=&#34;https://docs.pikvm.org/v2/#first-launch-and-usage&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;докуменації PiKVM&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/pw_change.png&#34;
	width=&#34;752&#34;
	height=&#34;547&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/pw_change_hu4692008650783861304.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/pw_change_hu17787389886763927875.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Процедура зміни стандартних паролів.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;137&#34;
		data-flex-basis=&#34;329px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;оновлення-програмного-забезпечення-pikvm-os&#34;&gt;Оновлення програмного забезпечення PiKVM OS&lt;/h3&gt;
&lt;p&gt;PiKVM OS — це операційна система з відкритим кодом на базі Arch Linux. Важливо регулярно оновлювати ОС PiKVM, щоб отримувати оновлення безпеки та нові функції. Як і оновлення будь якої системи, основаної на базі ядра Linux, процедура також виконується через термінал. Ви можете використовувати оболонку ssh або термінал вбудований в веб-інтерфейс PiKVM.&lt;/p&gt;
&lt;p&gt;Щоб оновити ОС, виконайте такі дії:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Відкрийте термінал у веб-інтерфейсі PiKVM. В якості альтернативи можна використовувати ssh.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Отримайте root-доступ, ввівши команду &lt;code&gt;su -&lt;/code&gt; і пароль від користувачва root.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Виконайте команду &lt;code&gt;pikvm-update&lt;/code&gt; і дочекайтеся завершення процесу. Будь ласка, переконайтеся, що ваш пристрій PiKVM не буде від&amp;rsquo;єднано від живлення та підключення до мережі інтернет під час процесу оновлення.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;налаштування-tailscale-vpn-необовязково&#34;&gt;Налаштування Tailscale VPN (необов’язково)&lt;/h3&gt;
&lt;p&gt;Можуть виникнути ситуації, коли я не можу отримати доступ до однієї локальної мережі з платою PiKVM, наприклад, коли я підключив PiKVM до домашнього сервера, і я фізично не вдома, і мені потрібен віддалений доступ до мого сервера.&lt;/p&gt;
&lt;p&gt;Крім того, враховуючи критерій щоб PiKVM був максимально портативним, я також хочу мати можливість позичити свій пристрій PiKVM комусь, щоб ця особа могла взяти його та підключити до свого ПК та локальної мережі, а я в свою чергу міг підключитися до цього ПК віддалено, та, наприклад, зміг допогти встановити операційну систему.&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://tailscale.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Tailscale VPN&lt;/a&gt; — це безкоштовний інструмент (для особистого користування), який можна використовувати як рішення для вище описаних випадків. Він дозволяє отримати доступ до PiKVM через мережу інтернет. Щоб налаштувати його, виконайте такі дії:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Відкрийте термінал у веб-інтерфейсі PiKVM. В якості альтернативи можна використовувати ssh.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Встановіть службу tailscale, ввівши цю послідовність команд в терміналі:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;su -
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rw
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;pacman -S tailscale-pikvm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; --now tailscaled
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tailscale up
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;
&lt;p&gt;Термінал покаже посилання, яке потрібно скопіювати та перейти у веб-браузері. Після переходу за посиланням увійдіть або зареєструйтеся в Tailscale VPN, тоді ваш пристрій PiKVM буде долучено до цього облікового запису.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Встановіть клієнт Tailscale у систему, яку ви хочете використовувати (не на комп’ютер, яким хочете керувати через PiKVM), і підключіть його до VPN. Для цього дотримуйтесь інструкцій &lt;a class=&#34;link&#34; href=&#34;https://tailscale.com/download&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;тут&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Після налаштування клієнта у вашій системі відвідайте &lt;a class=&#34;link&#34; href=&#34;https://login.tailscale.com/admin/machines&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;сторінку адміністратора Tailscale&lt;/a&gt;. Якщо ви все зробили правильно, ви повинні побачити свій пристрій PiKVM і систему, що використовується для віддаленого підключення до PiKVM.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/tailscale_admin1.jpg&#34;
	width=&#34;1163&#34;
	height=&#34;516&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/tailscale_admin1_hu11672088242962744173.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/tailscale_admin1_hu12697132127269670673.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Інформаційна панель адміністратора TailScale, на якій показано підключені пристрої.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;225&#34;
		data-flex-basis=&#34;540px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;На знімку екрана вище я виділив приклад IP-адреси, яку слід використовувати в браузері для віддаленого підключення до PiKVM.&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;Переконайтеся, що ви вимкнули термін дії ключа для пристрою PiKVM. Щоб зробити це, натисніть значок «три крапки» праворуч від пристрою PiKVM у списку та виберіть опцію «Вимкнути термін дії ключа».&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Після завершення налаштування під час кожного завантаження пристрою PiKVM він автоматично підключатиметься до мережі VPN, тому, якщо мені потрібен віддалений доступ до нього з будь-якого місця, я можу просто підключити свій ноутбук чи телефон, що маю з собою, до тієї ж мережі VPN та керувати своїм пристроєм PiKVM.&lt;/p&gt;
&lt;h2 id=&#34;інструкція-з-використання-пристрою-pikvm-для-керування-пк--ноутбуком--сервером&#34;&gt;Інструкція з використання пристрою PiKVM для керування ПК / ноутбуком / сервером&lt;/h2&gt;
&lt;p&gt;Це інструкція стосується використання пристрою PiKVM як портативного. Для підключення вам необхідно мати: пристрій &lt;strong&gt;PiKVM&lt;/strong&gt;, &lt;strong&gt;машину&lt;/strong&gt;, якою ви хочете керувати, спеціальний кабель живлення та адаптер, кабель Ethernet RJ-45, кабель HDMI.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Візьміть кабель &lt;strong&gt;Ethernet RJ-45&lt;/strong&gt; та підключіть його до пристрою &lt;strong&gt;PiKVM&lt;/strong&gt; та до вашого &lt;strong&gt;роутера&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_8.jpg&#34;
	width=&#34;1743&#34;
	height=&#34;1552&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_8_hu12927432579760435346.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_8_hu11250767973265040350.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Ethernet RJ-45 що підключено до PiKVM.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;112&#34;
		data-flex-basis=&#34;269px&#34;
	
&gt;
&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_7.jpg&#34;
	width=&#34;2383&#34;
	height=&#34;1541&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_7_hu13073030356745473270.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_7_hu8277882780642044188.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Ethernet RJ-45 що підключено до роутера.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;154&#34;
		data-flex-basis=&#34;371px&#34;
	
&gt;
&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_6.jpg&#34;
	width=&#34;2188&#34;
	height=&#34;1318&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_6_hu4658498443439687423.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_6_hu7254739209202189401.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Мережеве з&amp;rsquo;єданння між роутером та PiKVM.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;166&#34;
		data-flex-basis=&#34;398px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Візьміть кабель &lt;strong&gt;HDMI&lt;/strong&gt; та підключіть його до пристрою &lt;strong&gt;PiKVM&lt;/strong&gt; та до &lt;strong&gt;машини&lt;/strong&gt;, якою ви хочете керувати.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_5.jpg&#34;
	width=&#34;1611&#34;
	height=&#34;1362&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_5_hu5717447596864417266.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_5_hu10337834441483334350.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;HDMI кабель що підключено до PiKVM.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;118&#34;
		data-flex-basis=&#34;283px&#34;
	
&gt;
&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_4.jpg&#34;
	width=&#34;2110&#34;
	height=&#34;1357&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_4_hu7429229186137975492.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_4_hu11342425139819630198.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;HDMIабель що підключено до ноутбука (буде розпізнаватися як монітор у системі).&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;155&#34;
		data-flex-basis=&#34;373px&#34;
	
&gt;
&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_3.jpg&#34;
	width=&#34;1665&#34;
	height=&#34;2477&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_3_hu9081464994234904598.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_3_hu14785043661241705487.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;HDMI з&amp;rsquo;єданння між PiKVM ноутбуком.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;67&#34;
		data-flex-basis=&#34;161px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Візьміть спеціальний кабель живлення та підключіть:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;USB-C&lt;/strong&gt; роз&amp;rsquo;єм до пристрою &lt;strong&gt;PiKVM&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;USB-A&lt;/strong&gt; роз&amp;rsquo;єм що позначено &lt;em&gt;&amp;ldquo;PC/Laptop (комп&amp;rsquo;ютер)&amp;rdquo;&lt;/em&gt; до &lt;strong&gt;машини&lt;/strong&gt;, якою ви хочете керувати.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;USB-A&lt;/strong&gt; роз&amp;rsquo;єм що позначено &lt;em&gt;&amp;ldquo;Power (живлення)&amp;rdquo;&lt;/em&gt; до &lt;strong&gt;адаптера живлення&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_2.jpg&#34;
	width=&#34;1557&#34;
	height=&#34;2036&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_2_hu18130387726807736717.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_2_hu7633090793140941502.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Підключення USB-C роз&amp;rsquo;єму до PiKVM пристрою.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;76&#34;
		data-flex-basis=&#34;183px&#34;
	
&gt;
&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_1.jpg&#34;
	width=&#34;1916&#34;
	height=&#34;1203&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_1_hu6957170396218401372.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_1_hu10373957517381546310.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Підключення USB-A роз&amp;rsquo;єму для передачі даних до ноутбука (буде розпізнаватися як миша/клавіатура в системі.).&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;159&#34;
		data-flex-basis=&#34;382px&#34;
	
&gt;
&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG.jpg&#34;
	width=&#34;1842&#34;
	height=&#34;2150&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_hu9175989119721185715.jpg 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/img/IMG_hu9723996004203649620.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Підключення USB-A роз&amp;rsquo;єму до адаптера живлення 5V 3A.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;85&#34;
		data-flex-basis=&#34;205px&#34;
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;
&lt;p&gt;Підключіть &lt;strong&gt;адаптер живлення&lt;/strong&gt; до електричної розетки. Пристрій &lt;strong&gt;PiKVM&lt;/strong&gt; має завантажитися та підключитися до мережі.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Запустіть &lt;strong&gt;машину&lt;/strong&gt;, якою ви хочете керувати.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Після цього ви зможете підключитися до пристрою &lt;strong&gt;PiKVM&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/pikvm-web.png&#34;
	width=&#34;1892&#34;
	height=&#34;1024&#34;
	srcset=&#34;https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/pikvm-web_hu9688570345688691484.png 480w, https://blog.moroz.cc/post/assembling-a-pikvm-v2-device-for-remote-kvm-over-ip-control-of-a-computer-or-server/pikvm-web_hu12362967959713237362.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Приклад KVM сесії віддаленого керування ноутбуком через веб-інтерфейс PiKVM.&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;184&#34;
		data-flex-basis=&#34;443px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;висновки&#34;&gt;Висновки&lt;/h2&gt;
&lt;p&gt;В результаті цього проекту було зібрано портативний пристрій KVM через IP, який має весь необхідний для моїх потреб функціонал:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Пристрій може використовувати як Ethernet, так і Wi-Fi з&amp;rsquo;єднання.&lt;/li&gt;
&lt;li&gt;Пристроєм можна повністю керувати віддалено за допомогою VPN.&lt;/li&gt;
&lt;li&gt;Пристрій зібрано в спеціальному унікальному корпусі ручної роботи, що використовує активне охолодження для запобігання перегріванню пристрою, тому його можна безпечно використовувати 24/7.&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        
    </channel>
</rss>
